generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Member {
  id         Int         @id @default(autoincrement())
  loginId    String      @unique(map: "IDX_46b7fab54bb0e16272371c06d9") @db.VarChar(255)
  credential String      @db.VarChar(255)
  VotingLog  VotingLog[]
}

model Star {
  id              Int            @id @default(autoincrement())
  name            String         @db.VarChar(255)
  profileImageUrl String         @db.VarChar(255)
  VotingTarget    VotingTarget[]
}

model Vote {
  id           Int            @id @default(autoincrement())
  name         String         @db.VarChar(255)
  startDt      DateTime       @db.DateTime(0)
  endDt        DateTime       @db.DateTime(0)
  VotingTarget VotingTarget[]
}

model VotingLog {
  id               Int          @id @default(autoincrement())
  alive            Int          @default(1) @db.TinyInt
  voted            DateTime     @default(now()) @db.DateTime(6)
  modified         DateTime     @default(now()) @db.DateTime(6)
  member_id        Int?
  voting_target_id Int
  VotingTarget     VotingTarget @relation(fields: [voting_target_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_2e9795840e0d6b065b409f3ff64")
  Member           Member?      @relation(fields: [member_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_b913b61dae38d608b01fc795e75")

  @@index([member_id], map: "FK_b913b61dae38d608b01fc795e75")
  @@index([voting_target_id], map: "FK_2e9795840e0d6b065b409f3ff64")
}

model VotingTarget {
  id        Int         @id @default(autoincrement())
  vote_id   Int
  star_id   Int
  VotingLog VotingLog[]
  Vote      Vote        @relation(fields: [vote_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_7a5d6c10d9a907925446dcd5421")
  Star      Star        @relation(fields: [star_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_b9e96ba8bf9dc7f1efed6399d63")

  @@index([vote_id], map: "FK_7a5d6c10d9a907925446dcd5421")
  @@index([star_id], map: "FK_b9e96ba8bf9dc7f1efed6399d63")
}
